# Nano ATM

## Допущения

- Отказываемся от какого либо хранения данных между сессиями. Программа работает пока запущена, при перезаупске все инициализируется заново
- Проект не предполагает масштабирования, поэтому максимально упрощаем архитектуру

## Реализация
- Применены WPF + CommunityToolkit.MVVM.
- Если точнее, то VVM. Слой данных отсутствует, выделенные сервисы отсутствуют, вся бизнес логика - прямо во вьюмоделях. Это оправдано, среди прочего, тем, что практически все внутренние данные являются отображаемыми.
- Компоненты и сущности:
    - Пачка денег (CashBundle): объект, вставляемый или вынимаемый из банкомата, представляет собой список номиналов банкнот с количествами штук каждого номинала
    - Кошелек (Wallet): То, откуда юзер достает деньги, чтобы сформировать из них пачку. Кошелек безразмерен и представляет собой набор кнопок, которыми можно накликать любую сумму любыми банкнотами.
    - Кассета: коробочка внутри банкомата, умеющая хранить Capacity штук банкнот определенного вида.
    - Собственно банкомат (AtmViewModel): состоит из кассет и логики по внесению и извлечению денег. Обмен между банкоматом и внешним миром во всех случаях происходит пачками. При почти заполненных кассетах банкомат принимает то, что может, остальное возвращает.
    - Окна:
        - Главное окно (MainWindow, MainViewModel), реализует весь пользовательский интерфейс. Интерфейс имеет экранную клавиатуру, несколько кнопок и возможность показывать псевдо-диалоги в виде оверлейного контрола, а также текстовое сообщение в нижней части экрана.
        - Сервисное окно. Показывает содержимое кассет банкомата и общую сумму денег в нем. DataContext = AtmViewModel
    - модифированный App.xaml.cs, обеспечивающий нужные нам стартап и шатдаун (по закрытию любого из окон)
- Выдача с разменом имеется, но ее логика примитивная и иногда приводит к ситуациям, когда купюры есть, а выдать банкомат их не может. Например, если в банкомате есть по одной купюре 5 руб. и 10 руб. и если его попросить выдать 10 руб с разменом, он начнет с меньшей купюры и столкнется с невозможностью выдать оставшиеся 5 руб. "Крупными" работает всегда (при наличии купюр)